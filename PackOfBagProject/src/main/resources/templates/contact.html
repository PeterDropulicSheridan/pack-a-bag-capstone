<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Pack A Bag</title>
<link rel="stylesheet" type="text/css" href="css/contact.css">
<link rel="icon" type="image/png" href="/images/icon.png" sizes="32x32">
<link rel="stylesheet"
	href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>

<body>
	<header>
		<nav class="navbar">
			<div class="container">
				<a href="/" class="logo"> <img src="/images/packabag.png"
					alt="Pack-A-Bag Logo">
				</a>
				<button class="navbar-toggle" aria-label="Toggle navigation"
					onclick="showSidebar()">
					<img src="/images/menu_16dp_000000_FILL0_wght400_GRAD0_opsz20.png"
						alt="Menu" height="28" width="28">
				</button>

				<!-- Sidebar -->
				<ul class="sidebar">
					<li onclick="hideSidebar()"><a href="#"> <img
							src="images/close_16dp_000000_FILL0_wght400_GRAD0_opsz20.png"
							alt="Exit" height="28" width="28">
					</a></li>
					<li class="dropdown"><a href="#about" class="dropbtn">About
							Us</a>
						<ul class="dropdown-content">
							<li><a href="/history">History</a></li>
							<li><a href="/whoWeAre">Who We Are</a></li>
							<li><a
								href="https://static1.squarespace.com/static/5a6ca9a712abd97a05752180/t/5a8b175941920223d0d36ff9/1519861424787/Pack+a+Bag+for+a+Friend+-+Milton+Chamption+-+Dec+2014.pdf"
								target="_blank">Read about us</a></li>
							<li><a href="/thanksto">Thanks To</a></li>
						</ul></li>
					<li><a href="/donations">Donate</a></li>
					<li><a href="/eventView">Events</a></li>
					<li><a href="/photoGallery">Photo Gallery</a></li>
					<li><a href="/contact">Contact</a></li>
					<li sec:authorize="isAuthenticated()"><a href="/home">Dashboard</a></li>
					<li sec:authorize="isAuthenticated()"><a href="/logout">Logout</a></li>
					<li sec:authorize="!isAuthenticated()"><a href="/login">Login</a></li>
				</ul>

				<!-- Regular Nav Bar -->
				<ul class="nav-menu">
					<li class="hideOnMobile dropdown"><a href="#about"
						class="dropbtn">About Us</a>
						<ul class="dropdown-content">
							<li><a href="/history">History</a></li>
							<li><a href="/whoWeAre">Who We Are</a></li>
							<li><a
								href="https://static1.squarespace.com/static/5a6ca9a712abd97a05752180/t/5a8b175941920223d0d36ff9/1519861424787/Pack+a+Bag+for+a+Friend+-+Milton+Chamption+-+Dec+2014.pdf"
								target="_blank">Read about us</a></li>
							<li><a href="/thanksto">Thanks To</a></li>
						</ul></li>
					<li class="hideOnMobile"><a href="/donations">Donate</a></li>
					<li class="hideOnMobile"><a href="/eventView">Events</a></li>
					<li class="hideOnMobile"><a href="/photoGallery">Photo Gallery</a></li>
					<li class="hideOnMobile"><a href="/contact">Contact</a></li>
					<li class="hideOnMobile" sec:authorize="isAuthenticated()"><a
						href="/home">Dashboard</a></li>
					<li class="hideOnMobile" sec:authorize="isAuthenticated()"><a
						href="/logout">Logout</a></li>
					<li class="hideOnMobile" sec:authorize="!isAuthenticated()"><a
						href="/login">Login</a></li>
				</ul>
			</div>
		</nav>
	</header>

	<main>
    <div class="center-container">
        <div class="contact-form">
            <h1>CONTACT US</h1>
            <p>PLEASE COMPLETE THE FORM BELOW</p>
            <form id="contactForm" action="/sendEmail" method="POST">
                <div class="name-fields">
                    <div>
                        <label for="name">Name<span style="color: red;">(required)</span></label>
                       <span class="error" id="nameError"><mark></mark></span>
                        <input type="text" id="name" name="name">
                    </div>
                </div>
                <label for="email">Email Address <span style="color: red;">(required)</span></label>
                <span class="error" id="emailError"><mark></mark></span>
                <input type="email" id="email" name="email">

                <label for="message">Message <span style="color: red;">(required)</span></label>
                <span class="error" id="messageError"><mark></mark></span>
                <textarea id="message" name="message" rows="4"></textarea>
                <br>

                <button type="submit">Submit</button>
            </form>
        </div>
    </div>
    <section id="contact" class="contact">
            <div class="container">
                <h2>Contact Us</h2>
                <div class="contact-info">
                    <div class="contact-item">
                        <i class="fas fa-phone"></i>
                        <p><a href="tel:6472398711">(647)239-8711</a></p>
                    </div>
                    <div class="contact-item">
                        <i class="fas fa-envelope"></i>
                        <p><a href="mailto:packabag@bell.net">packabag@bell.net</a></p>
                    </div>
                    <div class="contact-item">
                        <i class="fab fa-facebook"></i>
                        <p><a href="https://www.facebook.com/PackABagFoundation" target="_blank">Pack A Bag Facebook
                                Page</a></p>
                    </div>
                </div>
            </div>
        </section>
</main>


    
	<footer>
		<div class="container">
			<p>&copy; 2024 Pack-A-Bag Foundation. All rights reserved.</p>
		</div>
	</footer>

	<script>
    window.onload = function () {
        var dropdownButtons = document.querySelectorAll('.dropbtn');
        var dropdownMenus = document.querySelectorAll('.dropdown-content');
        var sidebar = document.querySelector('.sidebar');
        var submitButton = document.querySelector('#contactForm button[type="submit"]');

        function resetDropdowns() {
            dropdownMenus.forEach(menu => menu.classList.remove('show'));
        }

        function resetSidebar() {
            sidebar.classList.remove('show');
        }

        function handleDropdowns() {
            if (window.innerWidth <= 768) {
                dropdownButtons.forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        e.preventDefault();
                        const nextMenu = btn.nextElementSibling;
                        if (nextMenu.classList.contains('show')) {
                            nextMenu.classList.remove('show');
                        } else {
                            resetDropdowns(); 
                            nextMenu.classList.add('show');
                        }
                    });
                });
            } else {
                resetDropdowns(); 
                dropdownButtons.forEach(btn => {
                    const dropdown = btn.closest('.dropdown');
                    const nextMenu = btn.nextElementSibling;

                    dropdown.addEventListener('mouseenter', () => {
                        nextMenu.style.display = 'block';
                    });

                    dropdown.addEventListener('mouseleave', () => {
                        nextMenu.style.display = 'none';
                    });
                });
            }
        }

        function handleResize() {
            handleDropdowns();
            if (window.innerWidth > 768) {
                resetSidebar();
            }
        }

        window.addEventListener('resize', handleResize);
        handleDropdowns();

        document.getElementById('contactForm').addEventListener('submit', function(event) {
            let valid = true;

            // Clear previous error messages
            const nameErrorMark = document.getElementById('nameError').querySelector('mark');
            const emailErrorMark = document.getElementById('emailError').querySelector('mark');
            const messageErrorMark = document.getElementById('messageError').querySelector('mark');

            nameErrorMark.style.visibility = 'hidden';
            emailErrorMark.style.visibility = 'hidden';
            messageErrorMark.style.visibility = 'hidden';

            // Validate Name
            const name = document.getElementById('name').value;
            if (name.trim() === '') {
                nameErrorMark.textContent = 'Name is required.';
                nameErrorMark.style.visibility = 'visible';
                valid = false;
            }

            // Validate Email
            const email = document.getElementById('email').value;
            const emailPattern = /^[^ ]+@[^ ]+\.[a-z]{2,3}$/;
            if (!emailPattern.test(email)) {
                emailErrorMark.textContent = 'Please enter a valid email address.';
                emailErrorMark.style.visibility = 'visible';
                valid = false;
            }

            // Validate Message
            const message = document.getElementById('message').value;
            if (message.trim() === '') {
                messageErrorMark.textContent = 'Message is required.';
                messageErrorMark.style.visibility = 'visible';
                valid = false;
            }

            if (valid) {
                submitButton.textContent = 'Submitting...';
                submitButton.disabled = true; // Disable the button immediately

                
                this.submit(); 
            } else {
                event.preventDefault(); // Prevent form submission if validation fails
            }
        });

        document.getElementById('contactForm').addEventListener('reset', function() {
            submitButton.textContent = 'Submit';
            submitButton.disabled = false;
        });
    };

    function showSidebar() {
        document.querySelector('.sidebar').classList.add('show');
    }

    function hideSidebar() {
        document.querySelector('.sidebar').classList.remove('show');
    }
</script>

</html>